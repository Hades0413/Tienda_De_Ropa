let productosEnCarrito=localStorage.getItem("productos-en-carrito");productosEnCarrito=JSON.parse(productosEnCarrito);const contenedorCarritoVacio=document.querySelector("#carrito-vacio"),contenedorCarritoProductos=document.querySelector("#carrito-productos"),contenedorCarritoAcciones=document.querySelector("#carrito-acciones"),contenedorCarritoComprado=document.querySelector("#carrito-comprado");let botonesEliminar=document.querySelectorAll(".carrito-producto-eliminar");const botonVaciar=document.querySelector("#carrito-acciones-vaciar"),contenedorTotal=document.querySelector("#total"),botonComprar=document.querySelector("#carrito-acciones-comprar");function cargarProductosCarrito(){productosEnCarrito&&productosEnCarrito.length>0?(contenedorCarritoVacio.classList.add("disabled"),contenedorCarritoProductos.classList.remove("disabled"),contenedorCarritoAcciones.classList.remove("disabled"),contenedorCarritoComprado.classList.add("disabled"),contenedorCarritoProductos.innerHTML="",productosEnCarrito.forEach((o=>{const r=document.createElement("div");r.classList.add("carrito-producto"),r.innerHTML=`\n                <img class="carrito-producto-imagen" src="${o.imagen}" alt="${o.titulo}">\n                <div class="carrito-producto-titulo">\n                    <small>Título</small>\n                    <h3>${o.titulo}</h3>\n                </div>\n                <div class="carrito-producto-cantidad">\n                    <small>Cantidad</small>\n                    <p>${o.cantidad}</p>\n                </div>\n                <div class="carrito-producto-precio">\n                    <small>Precio</small>\n                    <p>$${o.precio}</p>\n                </div>\n                <div class="carrito-producto-subtotal">\n                    <small>Subtotal</small>\n                    <p>$${o.precio*o.cantidad}</p>\n                </div>\n                <button class="carrito-producto-eliminar" id="${o.id}"><i class="bi bi-trash-fill"></i></button>\n            `,contenedorCarritoProductos.append(r)})),actualizarBotonesEliminar(),actualizarTotal()):(contenedorCarritoVacio.classList.remove("disabled"),contenedorCarritoProductos.classList.add("disabled"),contenedorCarritoAcciones.classList.add("disabled"),contenedorCarritoComprado.classList.add("disabled"))}function actualizarBotonesEliminar(){botonesEliminar=document.querySelectorAll(".carrito-producto-eliminar"),botonesEliminar.forEach((o=>{o.addEventListener("click",eliminarDelCarrito)}))}function eliminarDelCarrito(o){Toastify({text:"Producto eliminado",duration:3e3,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #232324, #232324)",borderRadius:"2rem",textTransform:"uppercase",fontSize:".75rem"},offset:{x:"1.5rem",y:"1.5rem"},onClick:function(){}}).showToast();const r=o.currentTarget.id,t=productosEnCarrito.findIndex((o=>o.id===r));productosEnCarrito.splice(t,1),cargarProductosCarrito(),localStorage.setItem("productos-en-carrito",JSON.stringify(productosEnCarrito))}function vaciarCarrito(){Swal.fire({title:"¿Estás seguro?",icon:"question",html:`Se van a borrar ${productosEnCarrito.reduce(((o,r)=>o+r.cantidad),0)} productos.`,showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Sí",cancelButtonText:"No"}).then((o=>{o.isConfirmed&&(productosEnCarrito.length=0,localStorage.setItem("productos-en-carrito",JSON.stringify(productosEnCarrito)),cargarProductosCarrito())}))}function actualizarTotal(){const o=productosEnCarrito.reduce(((o,r)=>o+r.precio*r.cantidad),0);total.innerText=`$${o}`}function comprarCarrito(){productosEnCarrito.length=0,localStorage.setItem("productos-en-carrito",JSON.stringify(productosEnCarrito)),contenedorCarritoVacio.classList.add("disabled"),contenedorCarritoProductos.classList.add("disabled"),contenedorCarritoAcciones.classList.add("disabled"),contenedorCarritoComprado.classList.remove("disabled")}cargarProductosCarrito(),botonVaciar.addEventListener("click",vaciarCarrito),botonComprar.addEventListener("click",comprarCarrito);